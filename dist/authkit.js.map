{"version":3,"sources":["../src/pkce.ts","../src/urls.ts","../src/token.ts","../src/session.ts","../src/events.ts","../src/authkit.ts"],"sourcesContent":["import type { PKCEBundle } from \"./types\";\n\nconst PKCE_STORAGE_KEY = \"authkit:pkce\";\nconst PKCE_MAX_AGE_MS = 10 * 60 * 1000; // 10 minutes\n\nfunction randomString(length: number): string {\n  const chars =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~\";\n  const random = new Uint8Array(length);\n  crypto.getRandomValues(random);\n  return Array.from(random, (b) => chars[b % chars.length]).join(\"\");\n}\n\nfunction base64UrlEncode(bytes: Uint8Array): string {\n  let binary = \"\";\n  for (const b of bytes) {\n    binary += String.fromCharCode(b);\n  }\n  return btoa(binary).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}\n\nexport async function createPkceBundle(): Promise<PKCEBundle> {\n  const codeVerifier = randomString(64);\n  const state = randomString(32);\n  const digest = await crypto.subtle.digest(\n    \"SHA-256\",\n    new TextEncoder().encode(codeVerifier),\n  );\n  const codeChallenge = base64UrlEncode(new Uint8Array(digest));\n  return { state, codeVerifier, codeChallenge };\n}\n\nexport function storePkce(bundle: PKCEBundle): void {\n  sessionStorage.setItem(\n    PKCE_STORAGE_KEY,\n    JSON.stringify({\n      state: bundle.state,\n      codeVerifier: bundle.codeVerifier,\n      createdAt: Date.now(),\n    }),\n  );\n}\n\nexport function retrievePkce(): {\n  state: string;\n  codeVerifier: string;\n} | null {\n  const raw = sessionStorage.getItem(PKCE_STORAGE_KEY);\n  if (!raw) return null;\n\n  try {\n    const data = JSON.parse(raw);\n    if (!data.state || !data.codeVerifier) return null;\n\n    if (Date.now() - data.createdAt > PKCE_MAX_AGE_MS) {\n      clearPkce();\n      return null;\n    }\n\n    return { state: data.state, codeVerifier: data.codeVerifier };\n  } catch {\n    return null;\n  }\n}\n\nexport function clearPkce(): void {\n  sessionStorage.removeItem(PKCE_STORAGE_KEY);\n}\n","import type { AuthKitConfig } from \"./types\";\n\nexport function createAuthorizeUrl(\n  config: AuthKitConfig,\n  params: {\n    codeChallenge: string;\n    state: string;\n    screenHint?: \"sign-in\" | \"sign-up\";\n    loginHint?: string;\n    organizationId?: string;\n    invitationToken?: string;\n  },\n): string {\n  const url = new URL(\"/user_management/authorize\", config.apiBaseUrl);\n  url.searchParams.set(\"client_id\", config.clientId);\n  url.searchParams.set(\"redirect_uri\", config.redirectUri);\n  url.searchParams.set(\"response_type\", \"code\");\n  url.searchParams.set(\"code_challenge\", params.codeChallenge);\n  url.searchParams.set(\"code_challenge_method\", \"S256\");\n  url.searchParams.set(\"state\", params.state);\n  if (params.screenHint) url.searchParams.set(\"screen_hint\", params.screenHint);\n  if (params.loginHint) url.searchParams.set(\"login_hint\", params.loginHint);\n  if (params.organizationId)\n    url.searchParams.set(\"organization_id\", params.organizationId);\n  if (params.invitationToken)\n    url.searchParams.set(\"invitation_token\", params.invitationToken);\n  return url.toString();\n}\n\nexport function createLogoutUrl(\n  config: AuthKitConfig,\n  sessionId: string,\n  returnTo?: string,\n): string {\n  const url = new URL(\n    \"/user_management/sessions/logout\",\n    config.apiBaseUrl,\n  );\n  url.searchParams.set(\"session_id\", sessionId);\n  if (returnTo) url.searchParams.set(\"return_to\", returnTo);\n  return url.toString();\n}\n","import type { AuthKitConfig, AuthKitUser, TokenResponse } from \"./types\";\n\nexport async function exchangeCode(\n  config: AuthKitConfig,\n  params: { code: string; codeVerifier: string },\n): Promise<TokenResponse> {\n  const url = new URL(\"/user_management/authenticate\", config.apiBaseUrl);\n\n  const body = new URLSearchParams({\n    grant_type: \"authorization_code\",\n    client_id: config.clientId,\n    code: params.code,\n    code_verifier: params.codeVerifier,\n  });\n\n  const response = await fetch(url.toString(), {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n    body,\n  });\n\n  if (!response.ok) {\n    throw new Error(`Token exchange failed (${response.status})`);\n  }\n\n  return response.json();\n}\n\nexport function decodeJwtClaims(\n  token: string,\n): Record<string, unknown> | null {\n  try {\n    const parts = token.split(\".\");\n    if (parts.length !== 3) return null;\n\n    const payload = parts[1]\n      .replace(/-/g, \"+\")\n      .replace(/_/g, \"/\");\n\n    const json = atob(payload);\n    return JSON.parse(json);\n  } catch {\n    return null;\n  }\n}\n\nexport function extractUser(tokenResponse: TokenResponse): AuthKitUser {\n  return {\n    sub: tokenResponse.user.id,\n    email: tokenResponse.user.email,\n    firstName: tokenResponse.user.first_name ?? undefined,\n    lastName: tokenResponse.user.last_name ?? undefined,\n    profilePictureUrl: tokenResponse.user.profile_picture_url ?? undefined,\n  };\n}\n","import type { AuthKitUser, StoredSession } from \"./types\";\n\nconst SESSION_KEY = \"authkit:session\";\n\nexport function storeSession(accessToken: string, user: AuthKitUser): void {\n  const session: StoredSession = { accessToken, user, storedAt: Date.now() };\n  localStorage.setItem(SESSION_KEY, JSON.stringify(session));\n}\n\nexport function getSession(): StoredSession | null {\n  const raw = localStorage.getItem(SESSION_KEY);\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw);\n  } catch {\n    return null;\n  }\n}\n\nexport function clearSession(): void {\n  localStorage.removeItem(SESSION_KEY);\n}\n","export function dispatchAuthKitEvent(name: string, detail?: unknown): void {\n  document.dispatchEvent(\n    new CustomEvent(`authkit:${name}`, {\n      detail,\n      bubbles: true,\n    }),\n  );\n}\n","import { createPkceBundle, storePkce, retrievePkce, clearPkce } from \"./pkce\";\nimport { createAuthorizeUrl, createLogoutUrl } from \"./urls\";\nimport { exchangeCode, extractUser, decodeJwtClaims } from \"./token\";\nimport { storeSession, getSession, clearSession } from \"./session\";\nimport { dispatchAuthKitEvent } from \"./events\";\nimport type {\n  AuthKitConfig,\n  AuthKitUser,\n  AuthKitGlobal,\n  SignInOptions,\n} from \"./types\";\n\n(function () {\n  if (typeof window === \"undefined\") return;\n\n  const scriptEl = document.currentScript as HTMLScriptElement | null;\n  const dataset = scriptEl?.dataset ?? {};\n\n  const clientId = dataset.clientId;\n  if (!clientId) {\n    console.error(\"[AuthKit] Missing required data-client-id attribute.\");\n    return;\n  }\n\n  const redirectUri = dataset.redirectUri || window.location.origin;\n  const config: AuthKitConfig = {\n    clientId,\n    redirectUri,\n    apiBaseUrl: dataset.apiHostname\n      ? `https://${dataset.apiHostname}`\n      : \"https://api.workos.com\",\n    devMode:\n      dataset.devMode !== undefined\n        ? dataset.devMode === \"true\"\n        : location.hostname === \"localhost\" ||\n          location.hostname === \"127.0.0.1\",\n    autoCallback: dataset.autoCallback !== \"false\",\n  };\n\n  let currentUser: AuthKitUser | null = null;\n  let currentAccessToken: string | null = null;\n\n  const existingSession = getSession();\n  if (existingSession) {\n    currentUser = existingSession.user;\n    currentAccessToken = existingSession.accessToken;\n  }\n\n  async function signIn(opts?: SignInOptions): Promise<void> {\n    const bundle = await createPkceBundle();\n    storePkce(bundle);\n\n    const url = createAuthorizeUrl(config, {\n      codeChallenge: bundle.codeChallenge,\n      state: bundle.state,\n      screenHint: opts?.screenHint,\n      loginHint: opts?.loginHint,\n      organizationId: opts?.organizationId,\n      invitationToken: opts?.invitationToken,\n    });\n\n    if (opts?.state) {\n      sessionStorage.setItem(\"authkit:state\", JSON.stringify(opts.state));\n    }\n\n    window.location.assign(url);\n  }\n\n  async function signUp(\n    opts?: Omit<SignInOptions, \"screenHint\">,\n  ): Promise<void> {\n    return signIn({ ...opts, screenHint: \"sign-up\" });\n  }\n\n  function signOut(opts?: { returnTo?: string }): void {\n    dispatchAuthKitEvent(\"signed-out\");\n\n    const accessToken = currentAccessToken;\n    clearSession();\n    currentUser = null;\n    currentAccessToken = null;\n\n    if (accessToken) {\n      const claims = decodeJwtClaims(accessToken);\n      const sessionId = claims?.sid as string | undefined;\n      if (sessionId) {\n        const url = createLogoutUrl(config, sessionId, opts?.returnTo);\n        window.location.assign(url);\n        return;\n      }\n    }\n\n    if (opts?.returnTo) {\n      window.location.assign(opts.returnTo);\n    } else {\n      window.location.reload();\n    }\n  }\n\n  function getUser(): AuthKitUser | null {\n    return currentUser;\n  }\n\n  function getAccessToken(): string | null {\n    return currentAccessToken;\n  }\n\n  async function handleCallback(): Promise<void> {\n    const url = new URL(window.location.href);\n    const code = url.searchParams.get(\"code\");\n    const stateParam = url.searchParams.get(\"state\");\n\n    if (!code) return;\n\n    const pkce = retrievePkce();\n    if (!pkce) {\n      console.error(\n        \"[AuthKit] Missing PKCE verifier. Was sign-in started from this browser?\",\n      );\n      return;\n    }\n\n    if (pkce.state !== stateParam) {\n      console.error(\"[AuthKit] State mismatch in callback.\");\n      clearPkce();\n      return;\n    }\n\n    try {\n      const tokenResponse = await exchangeCode(config, {\n        code,\n        codeVerifier: pkce.codeVerifier,\n      });\n\n      const user = extractUser(tokenResponse);\n      currentUser = user;\n      currentAccessToken = tokenResponse.access_token;\n      storeSession(tokenResponse.access_token, user);\n      clearPkce();\n\n      const cleanUrl = new URL(window.location.href);\n      cleanUrl.search = \"\";\n      history.replaceState({}, \"\", cleanUrl.toString());\n\n      dispatchAuthKitEvent(\"signed-in\", { user });\n    } catch (error) {\n      console.error(\"[AuthKit] Token exchange failed:\", error);\n      clearPkce();\n    }\n  }\n\n  let resolveReady: (value: { user: AuthKitUser | null }) => void;\n  const ready = new Promise<{ user: AuthKitUser | null }>((resolve) => {\n    resolveReady = resolve;\n  });\n\n  const authkit: AuthKitGlobal = {\n    ready,\n    signIn,\n    signUp,\n    signOut,\n    getUser,\n    getAccessToken,\n  };\n\n  (window as any).AuthKit = authkit;\n\n  const isCallbackUrl = (function () {\n    try {\n      const redirectPath = new URL(redirectUri, window.location.origin)\n        .pathname;\n      const currentPath = window.location.pathname;\n      return (\n        (currentPath === redirectPath ||\n          currentPath === redirectPath + \"/\") &&\n        new URLSearchParams(window.location.search).has(\"code\")\n      );\n    } catch {\n      return false;\n    }\n  })();\n\n  if (config.autoCallback && isCallbackUrl) {\n    handleCallback()\n      .then(() => {\n        resolveReady({ user: currentUser });\n        dispatchAuthKitEvent(\"ready\", { user: currentUser });\n      })\n      .catch((error) => {\n        console.error(\"[AuthKit] Callback handling failed:\", error);\n        resolveReady({ user: null });\n        dispatchAuthKitEvent(\"ready\", { user: null });\n      });\n  } else {\n    resolveReady!({ user: currentUser });\n    dispatchAuthKitEvent(\"ready\", { user: currentUser });\n  }\n})();\n"],"mappings":"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","names":[]}